<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WatchNextAI ‚Ä¢ Discover Movies</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
      <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
</head>
<body>
  <nav class="navbar">
    <div class="nav-brand">
      <div class="logo">üé¨</div>
      <div class="brand-text">
        <div class="brand-title">WatchNextAI</div>
        <div class="brand-subtitle">Find your next favorite film</div>
      </div>
    </div>

            <div class="content-type-tabs" id="contentTypeTabs">
            <button class="content-type-btn active" data-type="movies">üé¨ Movies</button>
            <button class="content-type-btn" data-type="tv">üì∫ TV Shows</button>
            <button class="content-type-btn" data-type="anime">üéå Anime</button>
        </div>

    <div class="nav-tabs" id="navLinks">
      <button class="nav-link active" data-category="discover">Discover</button>
      <button class="nav-link" data-category="trending">Trending</button>
      <button class="nav-link" data-category="popular">Popular</button>
      <button class="nav-link" data-category="top_rated">Top Rated</button>
      <button class="nav-link" data-category="upcoming">Upcoming</button>
      <button class="nav-link" data-category="now_playing">Now Playing</button>
    </div>

    <div class="nav-actions">
      <div class="search">
        <input
          id="searchInput"
          type="search"
          placeholder="Search the library..."
          aria-label="Search movies"
          autocomplete="off"
        />
        <button id="searchBtn" class="icon-btn" type="button">Search</button>
      </div>
      <button id="themeToggle" class="pill-btn" type="button">
        <span id="themeIcon">üåô</span>
        <span id="themeLabel">Dark</span>
      </button>
    </div>
  </nav>

  <main class="page">
    {% if error_message %}
      <div class="toast toast-error show">{{ error_message }}</div>
    {% endif %}

    <header class="page-header">
      <div>
        <h1 class="page-title" id="pageTitle">üß≠ Discover</h1>
        <p class="page-hint" id="pageHint">Endless picks across every genre and vibe.</p>
      </div>
      <div class="page-meta">
        <span class="chip">Updated weekly</span>
        <span class="chip">Powered by TMDB</span>
      </div>
    </header>

    <section class="grid" id="movie-container">
      {% for movie in movies %}
        <article class="card movie-card" data-title="{{ movie.title|default('')|lower }}">
          <a class="card-link" href="/movie/{{ movie.id }}">
            <img
              class="poster"
              src="{% if movie.poster_path %}https://image.tmdb.org/t/p/w500{{ movie.poster_path }}{% else %}https://via.placeholder.com/500x750?text=No+Image{% endif %}"
              alt="{{ movie.title }}"
              loading="lazy"
            />
          </a>
          <div class="card-meta">
            <h3 class="card-title">{{ movie.title or 'Untitled' }}</h3>
            <div class="card-sub">
              <span class="rating">‚≠ê {{ "%.1f"|format(movie.vote_average or 0) }}</span>
              <span class="release">{{ movie.release_date[:4] if movie.release_date else 'TBA' }}</span>
            </div>
          </div>
        </article>
      {% endfor %}
    </section>

    <div class="loader" id="loading" aria-live="polite">Loading more movies‚Ä¶</div>
    <div class="toast" id="toast" role="status"></div>

      <footer class="footer">
    <div class="footer-content">
      <p>&copy; 2026 WatchNextAI. All rights reserved.</p>
      <div class="footer-links">
        <a href="/terms">Terms & Conditions</a>
        <span>|</span>
        <a href="/privacy">Privacy Policy</a>
      </div>
    </div>
  </footer>
  </main>

  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
